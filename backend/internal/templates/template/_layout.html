{{define "layout.html"}}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{{block "title" .}}{{end}} - DeGov.AI</title>

    {{/* Define theme variable once at the top for reuse. */}}
    {{$theme := "dark"}}
    {{if eq .DegovSiteConfig.EmailTheme "light"}}
      {{$theme = "light"}}
    {{end}}

    <style>
      /* Base */
      body { margin:0; padding:0; -webkit-text-size-adjust:100%; -ms-text-size-adjust:100%; font-family: Inter, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; }
      table { border-collapse: collapse; }

      /* Typography */
      .title { margin:0 0 40px 0; font-size:26px; font-weight:600; line-height:1.3; }
      .text { font-size:16px; line-height:22px; font-weight:400; }
      .text-14 { font-size:14px; font-weight:400; }
      .fw-600 { font-weight:600; }
      .mb-8 { margin:0 0 8px 0; }
      .mb-20 { margin:0 0 20px 0; }
      .mb-30 { margin:0 0 30px 0; }
      .mb-40 { margin:0 0 40px 0; }
      .no-mb { margin:0; }
      .maxw-450 { max-width:450px; }

      /* Layout */
      .py-40 { padding:40px 0; }
      .p-40 { padding:40px; }
      .px-40 { padding:0 40px; }
      .pt-0 { padding-top:0; }
      .text-center { text-align:center; }
      .text-right { text-align:right; }
      .nowrap { white-space:nowrap; }

      /* Details Box */
      .box { margin:0 0 40px 0; padding:20px; border-radius:10px; }
      .label { font-size:14px; font-weight:400; margin:0 0 5px 0; }
      .value { font-size:16px; font-weight:600; line-height:22px; }
      .value-break { word-break:break-word; }

      /* CTAs */
      .cta-primary { margin:0 0 20px 0; text-align:center; }
      .btn-primary { display:block; text-decoration:none; font-size:14px; font-weight:600; padding:12px 20px; border-radius:100px; text-align:center; }
      .btn-primary-sm { display:block; text-decoration:none; font-size:14px; font-weight:600; padding:10px 20px; border-radius:100px; text-align:center; }
      .btn-outline { display:block; text-align:center; text-decoration:none; font-size:14px; font-weight:400; padding:12px 10px; border:1px solid; border-radius:100px; }
      .cta-table { margin:0 0 20px 0; }
      .cell-left { padding-right:10px; }
      .cell-right { padding-left:10px; }

      /* Footer */
      .footer-label { font-size:16px; line-height:22px; }
      .social-cell { padding-left:20px; }
      .social-icon { width:24px; height:24px; }
      .unsubscribe-text { display:inline; font-size:14px; line-height:20px; }
      .unsubscribe-link { display:inline; font-size:14px; line-height:20px; }
    </style>

    {{if eq $theme "dark"}}
    <style>
      /* Dark Theme */
      body { background:#111111; color:#ffffff; }
      .card { background:#222222; }
      .divider-line { background:#444444; }
      .title, .text, .label, .value, .footer-label { color:#ffffff; }
      .text-14-muted { color:#888888; }
      .box { background:#333333; }
      .btn-primary, .btn-primary-sm { background:#ffffff; color:#111111; }
      .btn-outline { color:#ffffff; border-color:#ffffff; }
      .unsubscribe-text { color:#888888; }
      .unsubscribe-link { color:#55acee; }
    </style>
    {{else}}
    <style>
      /* Light Theme */
      body { background:#F7F7F7; color:#202224; }
      .card { background:#ffffff; }
      .divider-line { background:#E5E5E5; }
      .title, .text, .label, .value, .footer-label { color:#202224; }
      .text-14-muted { color:#979797; }
      .box { background:#F7F7F7; }
      .btn-primary, .btn-primary-sm { background:#202224; color:#ffffff; }
      .btn-outline { color:#202224; border-color:#202224; }
      .unsubscribe-text { color:#979797; }
      .unsubscribe-link { color:#006FFF; }
    </style>
    {{end}}
  </head>
  <body>
    {{$config := .DegovSiteConfig}}
    <table role="presentation" cellpadding="0" cellspacing="0" border="0" width="100%">
      <tr>
        <td class="py-40">
          <table role="presentation" cellpadding="0" cellspacing="0" border="0" width="550" align="center" class="card">
            <tr>
              <td class="p-40 text-center">
                <a href="{{$config.Home}}" target="_blank">
                  {{if eq $theme "dark"}}
                  <img src="{{$config.LogoLight}}" alt="{{$config.Name}}" style="max-width: 195px; height: auto;" />
                  {{else}}
                  <img src="{{$config.LogoDark}}" alt="{{$config.Name}}" style="max-width: 195px; height: auto;" />
                  {{end}}
                </a>
              </td>
            </tr>

            <tr>
              <td class="px-40">
                <table role="presentation" cellpadding="0" cellspacing="0" border="0" width="100%">
                  <tr><td height="1" class="divider-line" style="font-size:0; line-height:0;">&nbsp;</td></tr>
                </table>
              </td>
            </tr>

            <tr>
              <td class="p-40">
                {{block "content" .}}{{end}}
              </td>
            </tr>

            <tr>
              <td class="px-40">
                <table role="presentation" cellpadding="0" cellspacing="0" border="0" width="100%">
                  <tr><td height="1" class="divider-line" style="font-size:0; line-height:0;">&nbsp;</td></tr>
                </table>
              </td>
            </tr>

            <tr>
              <td class="p-40">
                <table role="presentation" cellpadding="0" cellspacing="0" border="0" width="100%">
                  <tr>
                    <td class="footer-label" style="vertical-align: middle;">
                      {{- with .DaoConfig -}}{{- if .Name}}{{.Name}} - {{end}}{{- end -}}DeGov.AI
                    </td>
                    <td align="right">
                      <table role="presentation" cellpadding="0" cellspacing="0" border="0">
                        <tr>
                          {{range $config.Socials}}
                          <td class="social-cell">
                            <a href="{{.Link}}" target="_blank">
                              {{if eq $theme "dark"}}
                              <img src='{{.IconLight}}' alt="{{.Name}}" class="social-icon" />
                              {{else}}
                              <img src='{{.IconDark}}' alt="{{.Name}}" class="social-icon" />
                              {{end}}
                            </a>
                          </td>
                          {{end}}
                        </tr>
                      </table>
                    </td>
                  </tr>
                </table>
              </td>
            </tr>

            <tr>
              <td class="p-40 pt-0 text-center">
                <span class="unsubscribe-text">Want to change how you receive these emails?</span><br/>
                <span class="unsubscribe-text nowrap">You can <a href="#" class="unsubscribe-link" style="text-decoration: underline;">update your subscribe preferences</a></span>
              </td>
            </tr>
          </table>
        </td>
      </tr>
    </table>
  </body>
</html>
{{end}}
