
{{/* Main layout template definition. */}}
{{define "layout.html"}}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{{block "title" .}}{{end}} - DeGov.AI</title>

    {{/*
      The theme variable is now defined only once in the body,
      so we can determine which single style block to render.
    */}}
    {{$theme := "dark"}}
    {{if eq .DegovSiteConfig.EmailTheme "light"}}
      {{$theme = "light"}}
    {{end}}

    {{if eq $theme "dark"}}
    <style>
      /* Reset styles */
      body, table, td, p, a, li, blockquote { -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; margin: 0; padding: 0; }
      table, td { mso-table-lspace: 0pt; mso-table-rspace: 0pt; }
      img { -ms-interpolation-mode: bicubic; border: 0; height: auto; line-height: 100%; outline: none; text-decoration: none; }

      /* Main styles for Dark Theme */
      body { background-color: #000000; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"; color: #ffffff; }
      .email-container { max-width: {{ if and .EmailStyle .EmailStyle.ContainerMaxWidth }}{{ .EmailStyle.ContainerMaxWidth }}{{ else }}600px{{ end }}; margin: 40px auto; background-color: #1a1a1a; border-radius: 12px; overflow: hidden; }
      .header-logo { padding: 40px; text-align: center; background-color: #1a1a1a; }
      .header-logo img { max-width: 200px; height: auto; vertical-align: middle; }
      .divider, .footer-divider { border-bottom: 1px solid #333333; margin: 0 40px; }
      .content { padding: 35px 40px 40px 40px; background-color: #1a1a1a; color: #ffffff; }
      .title { font-size: 28px; color: #ffffff; margin-bottom: 16px; font-weight: 600; line-height: 1.3; }
      .expiry-note p { margin: 0; }
      .verification-code { font-size: 36px; font-weight: bold; color: #ffffff; letter-spacing: 8px; font-family: "Courier New", Courier, monospace; }
      .footer-content { padding: 25px 40px; text-align: left; background-color: #1a1a1a; }
      .footer-project-name { color: #ffffff; font-size: 15px; font-weight: 600; margin: 0; }
      .social-icons { margin-top: 0; text-align: right; }
      .social-icon { display: inline-block; margin-left: 20px; width: 20px; height: 20px; vertical-align: middle; }
      .social-icon img { width: 100%; height: auto; }
      .unsubscribe-section { padding: 30px 40px; text-align: center; background-color: #1a1a1a; margin-top: 0; }
      .unsubscribe-text { color: #888888; font-size: 12px; line-height: 1.6; }
      .unsubscribe-link { color: #55acee; text-decoration: underline; }

      /* Responsive */
      @media only screen and (max-width: 600px) {
        .email-container { width: 100% !important; margin: 0 !important; border-radius: 0; }
        .header-logo, .content, .footer-content, .unsubscribe-section { padding: 25px !important; }
        .divider, .footer-divider { margin: 0 25px !important; }
        .title { font-size: 24px !important; }
        .verification-code { font-size: 30px !important; letter-spacing: 6px !important; }
        .footer-content td { display: block !important; width: 100% !important; text-align: center !important; }
        .footer-content td:last-child { padding-top: 20px; }
      }
    </style>
    {{else}}
    <style>
      /* Reset styles */
      body, table, td, p, a, li, blockquote { -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; margin: 0; padding: 0; }
      table, td { mso-table-lspace: 0pt; mso-table-rspace: 0pt; }
      img { -ms-interpolation-mode: bicubic; border: 0; height: auto; line-height: 100%; outline: none; text-decoration: none; }

      /* Main styles */
      body { background-color: #f0f2f5; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"; color: #1c1e21; }
      .email-container { max-width: {{ if and .EmailStyle .EmailStyle.ContainerMaxWidth }}{{ .EmailStyle.ContainerMaxWidth }}{{ else }}600px{{ end }}; margin: 40px auto; background-color: #ffffff; border-radius: 12px; overflow: hidden; border: 1px solid #d2d6dc; }
      .header-logo { padding: 40px; text-align: center; background-color: #ffffff; }
      .header-logo img { max-width: 200px; height: auto; vertical-align: middle; }
      .divider, .footer-divider { border-bottom: 1px solid #d2d6dc; margin: 0 40px; }
      .content { padding: 35px 40px 40px 40px; background-color: #ffffff; color: #1c1e21; }
      .title { font-size: 28px; color: #1c1e21; margin-bottom: 16px; font-weight: 600; line-height: 1.3; }
      .unsubscribe-text p { margin: 0; }
      .verification-code { font-size: 36px; font-weight: bold; color: #1c1e21; letter-spacing: 8px; font-family: "Courier New", Courier, monospace; }
      .footer-content { padding: 25px 40px; text-align: left; background-color: #ffffff; }
      .footer-project-name { color: #1c1e21; font-size: 15px; font-weight: 600; margin: 0; }
      .social-icons { margin-top: 0; text-align: right; }
      .social-icon { display: inline-block; margin-left: 20px; width: 20px; height: 20px; vertical-align: middle; }
      .social-icon img { width: 100%; height: auto; }
      .unsubscribe-section { padding: 30px 40px; text-align: center; background-color: #ffffff; margin-top: 0; }
      .unsubscribe-text { color: #8a8d91; font-size: 12px; line-height: 1.6; }
      .unsubscribe-link { color: #55acee; text-decoration: underline; }

      /* Responsive */
      @media only screen and (max-width: 600px) {
        .email-container { width: 100% !important; margin: 0 !important; border-radius: 0; border: 0; }
        .header-logo, .content, .footer-content, .unsubscribe-section { padding: 25px !important; }
        .divider, .footer-divider { margin: 0 25px !important; }
        .title { font-size: 24px !important; }
        .verification-code { font-size: 30px !important; letter-spacing: 6px !important; }
        .footer-content td { display: block !important; width: 100% !important; text-align: center !important; }
        .footer-content td:last-child { padding-top: 20px; }
      }
    </style>
    {{end}}

    {{block "header" .}}
      <meta name="_name" content="_content" />
    {{end}}
  </head>
  <body>
    {{$config := .DegovSiteConfig}}
    {{$theme := "dark"}}
    {{if eq $config.EmailTheme "light"}}
      {{$theme = "light"}}
    {{end}}

    <table role="presentation" cellspacing="0" cellpadding="0" border="0" width="100%">
      <tr>
        <td>
          <div class="email-container">
            <div class="header-logo">
              <a href="{{$config.Home}}" target="_blank">
                {{if eq $theme "dark"}}
                <img
                  src="{{$config.LogoLight}}"
                  alt="{{$config.Name}}"
                  style="width: auto; height: auto; vertical-align: middle"
                />
                {{else}}
                <img
                  src="{{$config.LogoDark}}"
                  alt="{{$config.Name}}"
                  style="width: auto; height: auto; vertical-align: middle"
                />
                {{end}}
              </a>
            </div>

            <div class="divider"></div>

            <div class="content">
              {{block "content" .}}
                <p>This is default content, which should be overridden by a specific template.</p>
              {{end}}
            </div>

            <div class="footer-divider"></div>

            <table role="presentation" cellspacing="0" cellpadding="0" border="0" width="100%">
              <tr>
                <td class="footer-content">
                  <table role="presentation" cellspacing="0" cellpadding="0" border="0" width="100%">
                    <tr>
                      <td style="width: 50%; vertical-align: middle">
                        <p class="footer-project-name">
                          {{- with .DaoConfig -}}
                            {{- if .Name}}{{.Name}} - {{end -}}
                          {{- end -}}
                          DeGov.AI
                        </p>
                      </td>
                      <td style="width: 50%; text-align: right; vertical-align: middle;">
                        <div class="social-icons">
                          {{range $config.Socials}}
                           <a href="{{.Link}}" class="social-icon" target="_blank">
                              {{if eq $theme "dark"}}
                              <img src='{{.IconLight}}' alt="{{.Name}}"/>
                              {{else}}
                              <img src='{{.IconDark}}' alt="{{.Name}}"/>
                              {{end}}
                           </a>
                          {{end}}
                        </div>
                      </td>
                    </tr>
                  </table>
                </td>
              </tr>
            </table>

            <div class="unsubscribe-section">
              <p class="unsubscribe-text">
                Want to change how you receive these emails?<br />
                You can
                <a href="#" class="unsubscribe-link">update your subscribe preferences</a>
              </p>
            </div>
          </div>
        </td>
      </tr>
    </table>
  </body>
</html>
{{end}}
